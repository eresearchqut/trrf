/*! jQuery userTimeout - v0.5.1 - 2018-01-23
* https://github.com/lleblanc42/jquery-userTimeout
* Copyright (c) 2018 Luke LeBlanc; Licensed GPL-3.0 */
!function(a,b,c,d){"use strict";a.fn.userTimeout=function(d){var e,f,g,h,i,j,k,l,m={logouturl:null,referer:!1,refererName:"refer",notify:!0,timer:!0,session:6e5,force:1e4,ui:"auto",debug:!1,modalTitle:"Session Timeout",modalBody:"You're being timed out due to inactivity. Please choose to stay signed in or to logoff. Otherwise, you will logged off automatically.",modalLogOffBtn:"Log Off",modalStayLoggedBtn:"Stay Logged In"},n=a.extend(m,d||{}),o=function(){return n.logouturl?void(r(n.ui)!==!1&&(p(),a(b).on("focus click mousemove mousedown keyup scroll keypress",function(){p()}))):void(n.debug===!0?c.alert("Please configure the userTimeout plugin!"):c.console.error("Please configure the userTimeout plugin!"))},p=function(a){switch(clearTimeout(e),clearTimeout(f),h=(new Date).getTime(),i=0,j=0,a){case"logout":g=Math.floor(n.force/1e3),f=setTimeout(function(){q(a)},100);break;default:e=setTimeout(function(){q(a)},100)}},q=function(b){switch(i+=100,k=(new Date).getTime()-h-i,b){case"logout":i===n.force?t():(j+=100,1e3===j&&0!==g&&(g-=1,a("#countdowntimer").html(g),j=0),f=setTimeout(function(){q(b)},100-k));break;default:i===n.session?n.notify===!0?s():t():e=setTimeout(function(){q(b)},100-k)}},r=function(b){switch(b){case"auto":if("function"==typeof a().emulateTransitionEnd)l="bootstrap";else{if("undefined"==typeof jQuery.ui)return n.debug===!0?c.alert("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"):c.console.error("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1;l="jqueryui"}break;case"bootstrap":if("function"!=typeof a().emulateTransitionEnd)return n.debug===!0?c.alert("Twitter Bootstrap 3 was not found! Please load the proper libraries and their themes to utilize this plugin!"):c.console.error("Twitter Bootstrap 3 was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1;l="bootstrap";break;case"jqueryui":if("undefined"==typeof jQuery.ui)return n.debug===!0?c.alert("jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"):c.console.error("jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1;l="jqueryui";break;default:return n.debug===!0?c.alert("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"):c.console.error("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1}return!0},s=function(){if(p("logout"),a(b).on("focus click mousemove mousedown keyup scroll keypress",function(){p("logout")}),"bootstrap"===l){var c,d,e,f,h,i,j;c=a('<div class="modal fade" id="notifyLogout" tabindex="-1" role="dialog" aria-labelledby="notifyLogoutLabel" aria-hidden="true"></div>'),d=a('<div class="modal-dialog"></div>'),e=a('<div class="modal-content"></div>'),f=a('<div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title" id="notifyLogoutLabel">'+n.modalTitle+"</h4></div>"),h=a('<div class="modal-body">'+n.modalBody+"</div>"),i=a(n.timer===!0?'<div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal">'+n.modalStayLoggedBtn+' (<span id="countdowntimer">'+g+"</span>)</button></div>":'<div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal">'+n.modalStayLoggedBtn+"</button></div>"),j=a('<button type="button" class="btn btn-outline-secondary" id="logoff">'+n.modalLogOffBtn+"</button>"),e.append(f,h,i),i.prepend(j),d.append(e),c.append(d),a(c).modal({backdrop:"static",keyboard:!1,show:!0}),a(c).on("hide.bs.modal",function(){a(c).remove(),p(),a(b).on("focus click mousemove mousedown keyup scroll keypress",function(){p()})}),a(j).on("click",function(){t()})}else if("jqueryui"===l){var k,m={},o='<div id="notifyLogout"><p>'+n.modalBody+"</p></div>";m[n.modalStayLoggedBtn]=function(){k.dialog("close"),p(),a(b).on("focus click mousemove mousedown keyup scroll keypress",function(){p()})},m[n.modalLogOffBtn]=function(){t()},k=a(o).dialog({buttons:m,modal:!0,width:600,height:300,resizable:!1,title:n.modalTitle})}},t=function(){var b;if(clearTimeout(e),clearTimeout(f),n.referer!==!1)if("auto"===n.referer){var d=a(location).attr("href");b=n.logouturl+"?"+encodeURIComponent(n.refererName)+"="+encodeURIComponent(d)}else b=n.logouturl+"?"+encodeURIComponent(n.refererName)+"="+encodeURIComponent(n.referer);else b=n.logouturl;return c.location.replace(b)};return this.each(function(){o()})}}(jQuery,document,window);