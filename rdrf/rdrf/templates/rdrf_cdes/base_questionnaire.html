{% load i18n %}
{% get_current_language_bidi as LANGUAGE_BIDI %}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

{% load static %}
{% load admin_urls %}

<html {% if LANGUAGE_BIDI %}dir="rtl"{% endif %} xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>

        <title>{% block title %}Registry Title{% endblock %}</title>
    
        <script src="{% static 'js/vendor/jquery-3.5.1.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'js/vendor/underscore-1.13.1.min.js' %}"></script>
    
        {% if LANGUAGE_BIDI %}<link rel="stylesheet" href="{% static 'vendor/bootstrap-5.1.0/css/bootstrap.rtl.min.css' %}">{% else %}<link rel="stylesheet" href="{% static 'vendor/bootstrap-5.1.0/css/bootstrap.min.css' %}">{% endif %}

        <script type="text/javascript" src="{% static 'js/calculated_field_plugin.js' %}"></script>
        <script type="text/javascript" src="{% static 'js/form.js' %}"></script>

        <script type="text/javascript" src="{% static 'vendor/bootstrap-5.1.0/js/bootstrap.bundle.min.js' %}"></script>
        
        {% block extrastyle %}
            <style>
                ul {
                    list-style-type: none;
                    margin-left: 0;
                }
                
                table {
                    table-layout: fixed;
                }

		ul.errorlist {
		    display: block;
		    padding: 15px;
		    margin-bottom: 20px;
		    border: 1px solid transparent;
		    border-radius: 4px;
		    color: #a94442;
		    background-color: #f2dede;
		    border-color: #ebccd1;
		}
            </style>

        {% endblock %}
        
    </head>
    <script>
        $(document).ready(function() {

            var delay = 0;
            var offset = 150;

            document.addEventListener('invalid', function(e) {
                $(e.target).addClass("invalid");
                $('html, body').animate({
                    scrollTop: $($(".invalid")[0]).offset().top - offset
                }, delay);
            }, true);

            document.addEventListener('change', function(e) {
                $(e.target).removeClass("invalid")
            }, true);

            // if we're posting back Django errors - scroll to errorlist
	    try {
                $('html, body').animate({
                    scrollTop: $($(".errorlist")[0]).offset().top - offset
                }, delay);
	    }
	    catch(err) {
	    };
        });
    </script>

    <body style="background-color: #edeff1; padding-top: 80px; padding-bottom: 30px;">

        <div class="navbar navbar-dark bg-dark navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <div class="navbar-brand">
                        <div id="branding" class="branding">
                            {{registry|upper}} Registry | <i>Patient Questionnaire</i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            {% block content %}
            {% endblock %}
            
            {% block approval %}
            {% endblock %}
        </div>

    </body>

</html>
